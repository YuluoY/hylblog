!function () {
    let defaultOptions = {
        text: ">Last Modify: {docsify-updated}",
        formatUpdated: "{YYYY}/{MM}/{DD}"
    };

    function plugin(t, d) {
        text = `<div class="last-update-time">${d.config.timeUpdater.text}</div>`;
        t.beforeEach(function (t) {
            return t + "\n\n" + text
        })
        t.afterEach(function (html, next) {
            next(html);
        })
    }

    // 确定$docsify已被挂载
    window.$docsify = window.$docsify || {};
    /*
    * 查看$docsify是否已被挂载了timeUpdater属性
    * 如果存在，即：$docsify.formatUpdated = $docsify.timeUpdater.formatUpdated;
    * 若不存在，即：$docsify.formatUpdated = defaultOptions.formatUpdated;
    * */
    window.$docsify.formatUpdated = window.$docsify["timeUpdater"] ? window.$docsify["timeUpdater"].formatUpdated : defaultOptions.formatUpdated;
    /*
    * 将$docsify.timeUpdater可枚举的值复制到defaultOptions中，并挂载到$docsify.timeUpdater上
    * */
    window.$docsify["timeUpdater"] = Object.assign(defaultOptions, window.$docsify["timeUpdater"]);
    /*
    * 最后将该函数对象与$docsify.plugins数组合并
    * */
    window.$docsify.plugins = (window.$docsify.plugins || []).concat(plugin);
}()